@startuml
skin rose
' 定义角色
actor player1
actor player2
participant super
participant login

participant gateway
participant scene
participant record
participant public
participant msg
participant msdk

participant new_gateway
participant new_scene
participant new_record
participant new_public
participant new_msg
participant new_msdk

actor 运维

player1->gateway: 玩家连接着老进程
player2->gateway: 玩家连接着老进程
== 开始不停服维护 ==
运维-> super: 发送信号，即将进行不停服更新
... 同步状态 ...
scene-->player1: 通知不在战斗状态的玩家退出游戏后更新
scene-->player2: 战斗中的玩家战斗结束后退出游戏更新
super->gateway: 不再接收新玩家登录
@enduml